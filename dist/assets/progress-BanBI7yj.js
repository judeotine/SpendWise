import{g as y}from"./storage-CypTBWy_.js";import{v as x}from"./v4-CmTdKEVZ.js";import{r as p,j as h,q as E,a as j}from"./index-BQP0fyHA.js";const O=e=>{const r={};return e.forEach(n=>{r[n.category]||(r[n.category]=[]),r[n.category].push(n)}),r},T=(e,r)=>e.filter(n=>n.category===r).reduce((n,o)=>n+o.amount,0),Y=e=>{const r={};return e.forEach(n=>{const o=new Date(n.date),a=`${o.getFullYear()}-${o.getMonth()+1}`;r[a]||(r[a]=[]),r[a].push(n)}),r},J=()=>{const e=y();if(e.length<5)return[];const r=[],n=new Date,o=new Date;o.setMonth(n.getMonth()-1);const a=e.filter(t=>new Date(t.date)>=o),d=e.filter(t=>new Date(t.date)<o&&new Date(t.date)>=new Date(o.getFullYear(),o.getMonth()-1)),i=O(a);if(Object.entries(i).forEach(([t,s])=>{const l=s.reduce((c,u)=>c+u.amount,0),g=T(d,t);g>0&&l>g*1.5&&l>50&&r.push({id:x(),title:"Spending Increase Detected",description:`Your ${t} spending is ${Math.round((l/g-1)*100)}% higher than last month.`,type:"warning",date:new Date().toISOString(),read:!1,relatedCategory:t})}),a.forEach(t=>{const s=i[t.category]||[],l=s.reduce((g,c)=>g+c.amount,0)/s.length;t.amount>l*2&&t.amount>30&&r.push({id:x(),title:"Unusual Expense Detected",description:`Your ${t.description} expense of $${t.amount.toFixed(2)} is much higher than your average ${t.category} expense.`,type:"info",date:new Date().toISOString(),read:!1,relatedCategory:t.category})}),r.length===0&&Math.random()>.7){const t=Object.keys(i);if(t.length>0){const s=t[Math.floor(Math.random()*t.length)];r.push({id:x(),title:"Money-Saving Tip",description:`Consider setting a budget for ${s} to better track and control your spending.`,type:"info",date:new Date().toISOString(),read:!1,relatedCategory:s})}}return r},K=e=>{const n=y().filter(t=>t.category===e);if(n.length<3)return 0;const o={};n.forEach(t=>{const s=new Date(t.date),l=`${s.getFullYear()}-${s.getMonth()+1}`;o[l]||(o[l]=0),o[l]+=t.amount});const a=Object.values(o),d=a.reduce((t,s)=>t+s,0)/a.length,i=.9+Math.random()*.3;return Math.round(d*i*100)/100},Q=()=>{const e=y();if(e.length<10)return null;const r=Y(e),n=Object.entries(r).map(([c,u])=>({month:c,total:u.reduce((m,f)=>m+f.amount,0)}));n.sort((c,u)=>c.month.localeCompare(u.month));const o=n.length,a=Array.from({length:o},(c,u)=>u),d=n.map(c=>c.total),i=a.reduce((c,u)=>c+u,0),t=d.reduce((c,u)=>c+u,0),s=a.reduce((c,u,m)=>c+u*d[m],0),l=a.reduce((c,u)=>c+u*u,0),g=(o*s-i*t)/(o*l-i*i);return{monthlyTotals:n,trend:{slope:g,isIncreasing:g>0,percentChange:Math.abs(g)/(t/o)*100}}};function A(e,r=[]){let n=[];function o(d,i){const t=p.createContext(i),s=n.length;n=[...n,i];function l(c){const{scope:u,children:m,...f}=c,I=(u==null?void 0:u[e][s])||t,_=p.useMemo(()=>f,Object.values(f));return h.jsx(I.Provider,{value:_,children:m})}function g(c,u){const m=(u==null?void 0:u[e][s])||t,f=p.useContext(m);if(f)return f;if(i!==void 0)return i;throw new Error(`\`${c}\` must be used within \`${d}\``)}return l.displayName=d+"Provider",[l,g]}const a=()=>{const d=n.map(i=>p.createContext(i));return function(t){const s=(t==null?void 0:t[e])||d;return p.useMemo(()=>({[`__scope${e}`]:{...t,[e]:s}}),[t,s])}};return a.scopeName=e,[o,R(a,...r)]}function R(...e){const r=e[0];if(e.length===1)return r;const n=()=>{const o=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(d){const i=o.reduce((t,{useScope:s,scopeName:l})=>{const c=s(d)[`__scope${l}`];return{...t,...c}},{});return p.useMemo(()=>({[`__scope${r.scopeName}`]:i}),[i])}};return n.scopeName=r.scopeName,n}var M="Progress",P=100,[V,W]=A(M),[F,B]=V(M),S=p.forwardRef((e,r)=>{const{__scopeProgress:n,value:o=null,max:a,getValueLabel:d=X,...i}=e;(a||a===0)&&!$(a)&&console.error(L(`${a}`,"Progress"));const t=$(a)?a:P;o!==null&&!b(o,t)&&console.error(k(`${o}`,"Progress"));const s=b(o,t)?o:null,l=v(s)?d(s,t):void 0;return h.jsx(F,{scope:n,value:s,max:t,children:h.jsx(E.div,{"aria-valuemax":t,"aria-valuemin":0,"aria-valuenow":v(s)?s:void 0,"aria-valuetext":l,role:"progressbar","data-state":D(s,t),"data-value":s??void 0,"data-max":t,...i,ref:r})})});S.displayName=M;var w="ProgressIndicator",C=p.forwardRef((e,r)=>{const{__scopeProgress:n,...o}=e,a=B(w,n);return h.jsx(E.div,{"data-state":D(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...o,ref:r})});C.displayName=w;function X(e,r){return`${Math.round(e/r*100)}%`}function D(e,r){return e==null?"indeterminate":e===r?"complete":"loading"}function v(e){return typeof e=="number"}function $(e){return v(e)&&!isNaN(e)&&e>0}function b(e,r){return v(e)&&!isNaN(e)&&e<=r&&e>=0}function L(e,r){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${r}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${P}\`.`}function k(e,r){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${r}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${P} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var N=S,G=C;const U=p.forwardRef(({className:e,value:r,...n},o)=>h.jsx(N,{ref:o,className:j("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:h.jsx(G,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})}));U.displayName=N.displayName;export{U as P,Q as a,J as g,K as p};
