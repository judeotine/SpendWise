import{c as z,d as H,e as L,g as Y,u as O,r as a,j as e,m as n}from"./index-BQP0fyHA.js";import{g as V,P as R,C as U,u as W,s as $,d as q}from"./storage-CypTBWy_.js";import{I as y}from"./input-DQzwsVZq.js";import{B as f}from"./button-GPVt3lpZ.js";import{L as m}from"./label-BtERDAu_.js";import{f as w,g as G,a as J}from"./categories-DStd93aM.js";import{g as K,C as E}from"./CategoryIcon-9rblxCWz.js";import{D as Q,a as X,b as Z,c as _,d as ee}from"./dialog-BtKVVTZx.js";import{A as se,a as te,T as ae,b as re,c as ie,d as ne,e as oe,f as le,g as ce,h as de}from"./alert-dialog-BUa5Yd-y.js";import{v as me}from"./v4-CmTdKEVZ.js";import{f as pe}from"./format-DlqhSfMX.js";import"./Logo-K4bnVDL9.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=z("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Ee=()=>{const[S]=H(),j=L(),{toast:d}=Y(),r=S.get("id"),{activeCurrency:o}=O(),[p,b]=a.useState(""),[h,v]=a.useState(""),[l,C]=a.useState("food"),[u,N]=a.useState(pe(new Date,"yyyy-MM-dd")),[i,A]=a.useState(!1),[k,D]=a.useState(!1),[x,g]=a.useState(o),T=K(x);a.useEffect(()=>{if(r){const t=V().find(B=>B.id===r);t&&(b(t.amount.toString()),v(t.description),C(t.category),N(t.date.split("T")[0]),t.currency&&g(t.currency),A(!0))}else g(o)},[r,o]),a.useEffect(()=>{i||g(o)},[o,i]);const I=s=>{if(s.preventDefault(),!p||!h||!l||!u){d({title:"Missing information",description:"Please fill in all fields",variant:"destructive"});return}const t={id:r||me(),amount:parseFloat(p),description:h,category:l,date:new Date(u).toISOString(),currency:x};i?(W(t),d({title:"Expense updated",description:"Your expense has been updated successfully"})):($(t),d({title:"Expense added",description:"Your expense has been added successfully"})),j("/")},F=()=>{r&&(q(r),d({title:"Expense deleted",description:"Your expense has been deleted successfully"}),j("/"))},M=J(),P={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},c={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:20}}};return e.jsxs("div",{className:"min-h-full pb-6",children:[e.jsx(R,{title:i?"Edit Expense":"Add Expense",showBackButton:!0,rightContent:i&&e.jsxs(se,{children:[e.jsx(te,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"icon",className:"text-destructive",children:e.jsx(ae,{className:"h-5 w-5"})})}),e.jsxs(re,{className:"neo-blur border-rose-500/20",children:[e.jsxs(ie,{children:[e.jsx(ne,{className:"text-rose-500",children:"Delete Expense"}),e.jsx(oe,{children:"Are you sure you want to delete this expense? This action cannot be undone."})]}),e.jsxs(le,{children:[e.jsx(ce,{children:"Cancel"}),e.jsx(de,{onClick:F,className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})]})}),e.jsxs(n.form,{onSubmit:I,className:"p-4",variants:P,initial:"hidden",animate:"visible",children:[e.jsxs(n.div,{className:"mb-6",variants:c,children:[e.jsxs(m,{htmlFor:"amount",className:"mb-2 block",children:["Amount (",x,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-primary text-lg font-medium",children:T}),e.jsx(y,{id:"amount",className:"pl-8 text-lg neo-blur border-white/10",type:"number",step:"0.01",placeholder:"0.00",value:p,onChange:s=>b(s.target.value)})]})]}),e.jsxs(n.div,{className:"mb-6",variants:c,children:[e.jsx(m,{htmlFor:"description",className:"mb-2 block",children:"Description"}),e.jsx(y,{id:"description",placeholder:"What was this expense for?",value:h,onChange:s=>v(s.target.value),className:"neo-blur border-white/10"})]}),e.jsxs(n.div,{className:"mb-6",variants:c,children:[e.jsx(m,{className:"mb-2 block",children:"Category"}),e.jsxs(Q,{open:k,onOpenChange:D,children:[e.jsx(X,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:"w-full justify-start h-auto py-3 px-4 neo-blur border-white/10 hover:bg-white/10",children:[e.jsx(E,{category:l,size:"sm",className:"mr-3"}),e.jsx("span",{children:w(l)})]})}),e.jsxs(Z,{className:"sm:max-w-md neo-blur",children:[e.jsx(_,{children:e.jsx(ee,{children:"Select Category"})}),e.jsx("div",{className:"grid grid-cols-3 gap-4 py-4",children:M.map(s=>(G(s),e.jsxs(U,{className:`flex flex-col items-center p-3 cursor-pointer transition-all hover:bg-white/5 ${l===s?"neo-blur ring-2 ring-primary":"glassmorphism"}`,onClick:()=>{C(s),D(!1)},children:[e.jsx(E,{category:s,size:"sm"}),e.jsx("span",{className:"text-xs mt-2 text-center",children:w(s)})]},s)))})]})]})]}),e.jsxs(n.div,{className:"mb-8",variants:c,children:[e.jsx(m,{htmlFor:"date",className:"mb-2 block",children:"Date"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:e.jsx(he,{className:"h-4 w-4"})}),e.jsx(y,{id:"date",type:"date",value:u,onChange:s=>N(s.target.value),className:"neo-blur border-white/10"})]})]}),e.jsx(n.div,{variants:c,children:e.jsx(f,{type:"submit",className:"w-full py-6 text-lg shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all",children:i?"Update Expense":"Add Expense"})})]})]})};export{Ee as default};
