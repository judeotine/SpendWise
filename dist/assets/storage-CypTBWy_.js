import{c as j,r as l,D,a0 as E,e as O,j as c,m as x,a as g,v as N,a1 as S,n as k}from"./index-BQP0fyHA.js";import{L as T}from"./Logo-K4bnVDL9.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=j("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var R=E.useId||(()=>{}),B=0;function G(e){const[t,s]=l.useState(R());return D(()=>{e||s(o=>o??String(B++))},[e]),e||(t?`radix-${t}`:"")}function q({title:e,showBackButton:t=!1,showLogo:s=!1,className:o,rightContent:n}){const a=O();return c.jsxs(x.header,{className:g("sticky top-0 z-20 glassmorphism text-foreground backdrop-blur-xl px-4 py-4 flex items-center rounded-b-2xl shadow-lg border-b border-white/10",o),initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3,type:"spring",damping:15},children:[c.jsxs("div",{className:"flex-1 flex items-center",children:[t&&c.jsx(x.button,{onClick:()=>a(-1),className:"mr-3 p-1.5 rounded-full bg-white/10 hover:bg-white/20 transition-colors",whileTap:{scale:.9},whileHover:{scale:1.05},children:c.jsx(J,{className:"h-5 w-5"})}),s?c.jsx(T,{withText:!0,size:"sm",variant:"white"}):c.jsx(x.div,{className:"text-xl font-bold",initial:{opacity:0,x:-5},animate:{opacity:1,x:0},transition:{delay:.1,type:"spring"},children:e})]}),n&&c.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:n})]})}const A=l.forwardRef(({className:e,...t},s)=>c.jsx("div",{ref:s,className:g("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));A.displayName="Card";const H=l.forwardRef(({className:e,...t},s)=>c.jsx("div",{ref:s,className:g("flex flex-col space-y-1.5 p-6",e),...t}));H.displayName="CardHeader";const L=l.forwardRef(({className:e,...t},s)=>c.jsx("h3",{ref:s,className:g("text-2xl font-semibold leading-none tracking-tight",e),...t}));L.displayName="CardTitle";const Y=l.forwardRef(({className:e,...t},s)=>c.jsx("p",{ref:s,className:g("text-sm text-muted-foreground",e),...t}));Y.displayName="CardDescription";const z=l.forwardRef(({className:e,...t},s)=>c.jsx("div",{ref:s,className:g("p-6 pt-0",e),...t}));z.displayName="CardContent";const F=l.forwardRef(({className:e,...t},s)=>c.jsx("div",{ref:s,className:g("flex items-center p-6 pt-0",e),...t}));F.displayName="CardFooter";const m="spendwise-expenses",h="spendwise-budgets",v="spendwise-insights",b="spendwise-notifications",f=()=>{const e=localStorage.getItem(m);return e?JSON.parse(e):[]},M=(e=5)=>f().sort((s,o)=>new Date(o.date).getTime()-new Date(s.date).getTime()).slice(0,e),X=async()=>{const e=f(),t=N();if(e.length===0)return[];const s={};for(const a of e){s[a.category]||(s[a.category]=0);let r=a.amount;if(a.currency&&a.currency!==t)try{r=await S(r,a.currency,t)}catch(y){console.error("Error converting amount:",y)}s[a.category]+=r}const o=Object.values(s).reduce((a,r)=>a+r,0);return Object.entries(s).map(([a,r])=>({category:a,amount:r,percentage:r/o*100})).sort((a,r)=>r.amount-a.amount)},Q=e=>{const t=f();t.push(e),localStorage.setItem(m,JSON.stringify(t)),C(e)},V=e=>{const t=f(),s=t.findIndex(o=>o.id===e.id);s!==-1&&(t[s]=e,localStorage.setItem(m,JSON.stringify(t)),C(e))},W=e=>{const s=f().filter(o=>o.id!==e);localStorage.setItem(m,JSON.stringify(s))},C=async e=>{const t=I(),s=f(),o=new Date,n=N(),a=t.find(i=>i.category===e.category);if(!a)return;let r;switch(a.period){case"daily":r=new Date(o.setHours(0,0,0,0));break;case"weekly":const i=o.getDay();r=new Date(o),r.setDate(o.getDate()-i),r.setHours(0,0,0,0);break;case"yearly":r=new Date(o.getFullYear(),0,1);break;case"monthly":default:r=new Date(o.getFullYear(),o.getMonth(),1)}let y=0;for(const i of s.filter(d=>d.category===e.category&&new Date(d.date)>=r)){let d=i.amount;if(i.currency&&i.currency!==n)try{d=await S(i.amount,i.currency,n)}catch(u){console.error("Error converting amount:",u)}y+=d}let p=a.amount;if(a.currency&&a.currency!==n)try{p=await S(p,a.currency,n)}catch(i){console.error("Error converting budget amount:",i)}if(y>p){const i=y-p,d=`Budget Alert: ${e.category.charAt(0).toUpperCase()+e.category.slice(1)}`,u=`You've exceeded your ${a.period} budget by ${n} ${i.toFixed(2)}`;if(k({title:d,description:u,variant:"destructive"}),P({id:Date.now().toString(),title:d,message:u,date:new Date().toISOString(),category:e.category,read:!1}),"Notification"in window)try{Notification.permission==="granted"?new Notification(d,{body:u,icon:"/favicon.ico"}):Notification.permission!=="denied"&&Notification.requestPermission().then(w=>{w==="granted"&&new Notification(d,{body:u,icon:"/favicon.ico"})})}catch(w){console.error("Error showing system notification:",w)}}},I=()=>{const e=localStorage.getItem(h);return(e?JSON.parse(e):[]).map(s=>s.currency?s:{...s,currency:"USD"})},Z=e=>{const t=I(),s=t.findIndex(o=>o.id===e.id);e.currency||(e.currency=N()),s!==-1?t[s]=e:t.push(e),localStorage.setItem(h,JSON.stringify(t))},ee=e=>{const s=I().filter(o=>o.id!==e);localStorage.setItem(h,JSON.stringify(s))},$=()=>{const e=localStorage.getItem(v);return e?JSON.parse(e):[]},te=e=>{const t=$(),s=t.findIndex(o=>o.id===e);s!==-1&&(t[s].read=!0,localStorage.setItem(v,JSON.stringify(t)))},K=()=>{const e=localStorage.getItem(b);return e?JSON.parse(e):[]},P=e=>{const t=K();t.push(e),localStorage.setItem(b,JSON.stringify(t))},se=()=>{const e=[m,h,v,b];let t=0;const s={};for(const n of e){const a=localStorage.getItem(n);if(a){const r=new Blob([a]).size;t+=r,s[n]=r}else s[n]=0}const o=5*1024*1024;return{used:t,total:o,items:s}};export{A as C,q as P,M as a,X as b,se as c,W as d,$ as e,I as f,f as g,Z as h,ee as i,G as j,te as m,Q as s,V as u};
