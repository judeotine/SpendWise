import{c as Q,i as Me,W as Ee,r as S,j as e,m as H,X as de,n as Z,Y as U,e as Ue,A as ae,Z as _e,o as De,_ as be}from"./index-BQP0fyHA.js";import{B as R}from"./button-GPVt3lpZ.js";import{P as Fe,C as ne,s as ze}from"./storage-CypTBWy_.js";import{L as Be}from"./label-BtERDAu_.js";import{T as Ge,a as He,b as oe,c as ie}from"./tabs-ImSbNTYp.js";import{v as Re}from"./v4-CmTdKEVZ.js";import{C as Le}from"./check-5KbobFiQ.js";import{a as We,m as qe}from"./categories-DStd93aM.js";import{f as we}from"./format-DlqhSfMX.js";import"./Logo-K4bnVDL9.js";import"./index-CWH1sb8B.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=Q("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=Q("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=Q("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=Q("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=Q("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=Q("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=Q("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var Qe={exports:{}};(function(t){var s=function(o){var i=Object.prototype,c=i.hasOwnProperty,f=Object.defineProperty||function(a,r,n){a[r]=n.value},l,v=typeof Symbol=="function"?Symbol:{},y=v.iterator||"@@iterator",w=v.asyncIterator||"@@asyncIterator",L=v.toStringTag||"@@toStringTag";function m(a,r,n){return Object.defineProperty(a,r,{value:n,enumerable:!0,configurable:!0,writable:!0}),a[r]}try{m({},"")}catch{m=function(r,n,u){return r[n]=u}}function j(a,r,n,u){var d=r&&r.prototype instanceof k?r:k,b=Object.create(d.prototype),E=new A(u||[]);return f(b,"_invoke",{value:te(a,n,E)}),b}o.wrap=j;function O(a,r,n){try{return{type:"normal",arg:a.call(r,n)}}catch(u){return{type:"throw",arg:u}}}var N="suspendedStart",I="suspendedYield",_="executing",z="completed",x={};function k(){}function $(){}function D(){}var J={};m(J,y,function(){return this});var K=Object.getPrototypeOf,W=K&&K(K(T([])));W&&W!==i&&c.call(W,y)&&(J=W);var G=D.prototype=k.prototype=Object.create(J);$.prototype=D,f(G,"constructor",{value:D,configurable:!0}),f(D,"constructor",{value:$,configurable:!0}),$.displayName=m(D,L,"GeneratorFunction");function V(a){["next","throw","return"].forEach(function(r){m(a,r,function(n){return this._invoke(r,n)})})}o.isGeneratorFunction=function(a){var r=typeof a=="function"&&a.constructor;return r?r===$||(r.displayName||r.name)==="GeneratorFunction":!1},o.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,D):(a.__proto__=D,m(a,L,"GeneratorFunction")),a.prototype=Object.create(G),a},o.awrap=function(a){return{__await:a}};function q(a,r){function n(b,E,P,F){var M=O(a[b],a,E);if(M.type==="throw")F(M.arg);else{var X=M.arg,re=X.value;return re&&typeof re=="object"&&c.call(re,"__await")?r.resolve(re.__await).then(function(Y){n("next",Y,P,F)},function(Y){n("throw",Y,P,F)}):r.resolve(re).then(function(Y){X.value=Y,P(X)},function(Y){return n("throw",Y,P,F)})}}var u;function d(b,E){function P(){return new r(function(F,M){n(b,E,F,M)})}return u=u?u.then(P,P):P()}f(this,"_invoke",{value:d})}V(q.prototype),m(q.prototype,w,function(){return this}),o.AsyncIterator=q,o.async=function(a,r,n,u,d){d===void 0&&(d=Promise);var b=new q(j(a,r,n,u),d);return o.isGeneratorFunction(r)?b:b.next().then(function(E){return E.done?E.value:b.next()})};function te(a,r,n){var u=N;return function(b,E){if(u===_)throw new Error("Generator is already running");if(u===z){if(b==="throw")throw E;return h()}for(n.method=b,n.arg=E;;){var P=n.delegate;if(P){var F=p(P,n);if(F){if(F===x)continue;return F}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(u===N)throw u=z,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);u=_;var M=O(a,r,n);if(M.type==="normal"){if(u=n.done?z:I,M.arg===x)continue;return{value:M.arg,done:n.done}}else M.type==="throw"&&(u=z,n.method="throw",n.arg=M.arg)}}}function p(a,r){var n=r.method,u=a.iterator[n];if(u===l)return r.delegate=null,n==="throw"&&a.iterator.return&&(r.method="return",r.arg=l,p(a,r),r.method==="throw")||n!=="return"&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),x;var d=O(u,a.iterator,r.arg);if(d.type==="throw")return r.method="throw",r.arg=d.arg,r.delegate=null,x;var b=d.arg;if(!b)return r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,x;if(b.done)r[a.resultName]=b.value,r.next=a.nextLoc,r.method!=="return"&&(r.method="next",r.arg=l);else return b;return r.delegate=null,x}V(G),m(G,L,"Generator"),m(G,y,function(){return this}),m(G,"toString",function(){return"[object Generator]"});function g(a){var r={tryLoc:a[0]};1 in a&&(r.catchLoc=a[1]),2 in a&&(r.finallyLoc=a[2],r.afterLoc=a[3]),this.tryEntries.push(r)}function C(a){var r=a.completion||{};r.type="normal",delete r.arg,a.completion=r}function A(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(g,this),this.reset(!0)}o.keys=function(a){var r=Object(a),n=[];for(var u in r)n.push(u);return n.reverse(),function d(){for(;n.length;){var b=n.pop();if(b in r)return d.value=b,d.done=!1,d}return d.done=!0,d}};function T(a){if(a){var r=a[y];if(r)return r.call(a);if(typeof a.next=="function")return a;if(!isNaN(a.length)){var n=-1,u=function d(){for(;++n<a.length;)if(c.call(a,n))return d.value=a[n],d.done=!1,d;return d.value=l,d.done=!0,d};return u.next=u}}return{next:h}}o.values=T;function h(){return{value:l,done:!0}}return A.prototype={constructor:A,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(C),!a)for(var r in this)r.charAt(0)==="t"&&c.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=l)},stop:function(){this.done=!0;var a=this.tryEntries[0],r=a.completion;if(r.type==="throw")throw r.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var r=this;function n(F,M){return b.type="throw",b.arg=a,r.next=F,M&&(r.method="next",r.arg=l),!!M}for(var u=this.tryEntries.length-1;u>=0;--u){var d=this.tryEntries[u],b=d.completion;if(d.tryLoc==="root")return n("end");if(d.tryLoc<=this.prev){var E=c.call(d,"catchLoc"),P=c.call(d,"finallyLoc");if(E&&P){if(this.prev<d.catchLoc)return n(d.catchLoc,!0);if(this.prev<d.finallyLoc)return n(d.finallyLoc)}else if(E){if(this.prev<d.catchLoc)return n(d.catchLoc,!0)}else if(P){if(this.prev<d.finallyLoc)return n(d.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(a,r){for(var n=this.tryEntries.length-1;n>=0;--n){var u=this.tryEntries[n];if(u.tryLoc<=this.prev&&c.call(u,"finallyLoc")&&this.prev<u.finallyLoc){var d=u;break}}d&&(a==="break"||a==="continue")&&d.tryLoc<=r&&r<=d.finallyLoc&&(d=null);var b=d?d.completion:{};return b.type=a,b.arg=r,d?(this.method="next",this.next=d.finallyLoc,x):this.complete(b)},complete:function(a,r){if(a.type==="throw")throw a.arg;return a.type==="break"||a.type==="continue"?this.next=a.arg:a.type==="return"?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):a.type==="normal"&&r&&(this.next=r),x},finish:function(a){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===a)return this.complete(n.completion,n.afterLoc),C(n),x}},catch:function(a){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===a){var u=n.completion;if(u.type==="throw"){var d=u.arg;C(n)}return d}}throw new Error("illegal catch attempt")},delegateYield:function(a,r,n){return this.delegate={iterator:T(a),resultName:r,nextLoc:n},this.method==="next"&&(this.arg=l),x}},o}(t.exports);try{regeneratorRuntime=s}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}})(Qe);var me=(t,s)=>`${t}-${s}-${Math.random().toString(16).slice(3,8)}`;const Xe=me;let xe=0;var Ae=({id:t,action:s,payload:o={}})=>{let i=t;return typeof i>"u"&&(i=Xe("Job",xe),xe+=1),{id:i,action:s,payload:o}},ee={};let fe=!1;ee.logging=fe;ee.setLogging=t=>{fe=t};ee.log=(...t)=>fe?console.log.apply(void 0,t):null;const et=Ae,{log:se}=ee,tt=me;let je=0;var rt=()=>{const t=tt("Scheduler",je),s={},o={};let i=[];je+=1;const c=()=>i.length,f=()=>Object.keys(s).length,l=()=>{if(i.length!==0){const m=Object.keys(s);for(let j=0;j<m.length;j+=1)if(typeof o[m[j]]>"u"){i[0](s[m[j]]);break}}},v=(m,j)=>new Promise((O,N)=>{const I=et({action:m,payload:j});i.push(async _=>{i.shift(),o[_.id]=I;try{O(await _[m].apply(void 0,[...j,I.id]))}catch(z){N(z)}finally{delete o[_.id],l()}}),se(`[${t}]: Add ${I.id} to JobQueue`),se(`[${t}]: JobQueue length=${i.length}`),l()});return{addWorker:m=>(s[m.id]=m,se(`[${t}]: Add ${m.id}`),se(`[${t}]: Number of workers=${f()}`),l(),m.id),addJob:async(m,...j)=>{if(f()===0)throw Error(`[${t}]: You need to have at least one worker before adding jobs`);return v(m,j)},terminate:async()=>{Object.keys(s).forEach(async m=>{await s[m].terminate()}),i=[]},getQueueLen:c,getNumWorkers:f}};function st(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function at(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var nt=at;const ot=nt;var it=t=>{const s={};return typeof WorkerGlobalScope<"u"?s.type="webworker":ot()?s.type="electron":typeof window=="object"?s.type="browser":typeof process=="object"&&typeof st=="function"&&(s.type="node"),typeof t>"u"?s:s[t]};const ct=it("type")==="browser",lt=ct?t=>new URL(t,window.location.href).href:t=>t;var dt=t=>{const s={...t};return["corePath","workerPath","langPath"].forEach(o=>{t[o]&&(s[o]=lt(s[o]))}),s},ut=t=>{const s=[],o=[],i=[],c=[],f=[];return t.blocks&&t.blocks.forEach(l=>{l.paragraphs.forEach(v=>{v.lines.forEach(y=>{y.words.forEach(w=>{w.symbols.forEach(L=>{f.push({...L,page:t,block:l,paragraph:v,line:y,word:w})}),c.push({...w,page:t,block:l,paragraph:v,line:y})}),i.push({...y,page:t,block:l,paragraph:v})}),o.push({...v,page:t,block:l})}),s.push({...l,page:t})}),{...t,blocks:s,paragraphs:o,lines:i,words:c,symbols:f}},Te={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const ht=Te;var mt={defaultOEM:ht.DEFAULT};const ft="tesseract.js",pt="4.1.1",gt="Pure Javascript Multilingual OCR",vt="src/index.js",yt="src/index.d.ts",bt="dist/tesseract.min.js",wt="dist/tesseract.min.js",xt={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.dev.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},jt={"./src/worker/node/index.js":"./src/worker/browser/index.js"},Nt="",kt=["jeromewu"],St="Apache-2.0",Ct={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},Et={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^4.0.4","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},Rt={"@rollup/pluginutils":"^5.0.2"},Lt={type:"git",url:"https://github.com/naptha/tesseract.js.git"},It={url:"https://github.com/naptha/tesseract.js/issues"},At="https://github.com/naptha/tesseract.js",Tt={type:"opencollective",url:"https://opencollective.com/tesseractjs"},Ot={name:ft,version:pt,description:gt,main:vt,types:yt,unpkg:bt,jsdelivr:wt,scripts:xt,browser:jt,author:Nt,contributors:kt,license:St,devDependencies:Ct,dependencies:Et,overrides:Rt,repository:Lt,bugs:It,homepage:At,collective:Tt};var $t={langPath:"https://tessdata.projectnaptha.com/4.0.0",workerBlobURL:!0,logger:()=>{}},Pt={};const Mt=t=>new URL(t,window.location.href).href,{version:Ut}=Ot,_t=$t;var Dt={..._t,workerPath:typeof process<"u"&&Pt.TESS_ENV==="development"?Mt(`/dist/worker.dev.js?nocache=${Math.random().toString(36).slice(3)}`):`https://cdn.jsdelivr.net/npm/tesseract.js@v${Ut}/dist/worker.min.js`,corePath:null},Ft=({workerPath:t,workerBlobURL:s})=>{let o;if(Blob&&URL&&s){const i=new Blob([`importScripts("${t}");`],{type:"application/javascript"});o=new Worker(URL.createObjectURL(i))}else o=new Worker(t);return o},zt=t=>{t.terminate()},Bt=(t,s)=>{t.onmessage=({data:o})=>{s(o)}},Gt=async(t,s)=>{t.postMessage(s)};const ce=t=>new Promise((s,o)=>{const i=new FileReader;i.onload=()=>{s(i.result)},i.onerror=({target:{error:{code:c}}})=>{o(Error(`File could not be read! Code=${c}`))},i.readAsArrayBuffer(t)}),he=async t=>{let s=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?s=atob(t.split(",")[1]).split("").map(o=>o.charCodeAt(0)):s=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(s=await he(t.src)),t.tagName==="VIDEO"&&(s=await he(t.poster)),t.tagName==="CANVAS"&&await new Promise(o=>{t.toBlob(async i=>{s=await ce(i),o()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const o=await t.convertToBlob();s=await ce(o)}else(t instanceof File||t instanceof Blob)&&(s=await ce(t));return new Uint8Array(s)};var Ht=he;const Wt=Dt,qt=Ft,Jt=zt,Kt=Bt,Vt=Gt,Yt=Ht;var Zt={defaultOptions:Wt,spawnWorker:qt,terminateWorker:Jt,onMessage:Kt,send:Vt,loadImage:Yt};const Qt=dt,Xt=ut,B=Ae,{log:Ne}=ee,er=me,{defaultOEM:tr}=mt,{defaultOptions:rr,spawnWorker:sr,terminateWorker:ar,onMessage:nr,loadImage:ke,send:or}=Zt;let Se=0;var Oe=async(t={})=>{const s=er("Worker",Se),{logger:o,errorHandler:i,...c}=Qt({...rr,...t}),f={},l={};let v,y;const w=new Promise((p,g)=>{y=p,v=g}),L=p=>{v(p.message)};let m=sr(c);m.onerror=L,Se+=1;const j=(p,g)=>{f[p]=g},O=(p,g)=>{l[p]=g},N=({id:p,action:g,payload:C})=>new Promise((A,T)=>{Ne(`[${s}]: Start ${p}, action=${g}`),j(g,A),O(g,T),or(m,{workerId:s,jobId:p,action:g,payload:C})}),I=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),_=p=>N(B({id:p,action:"load",payload:{options:c}})),z=(p,g,C)=>N(B({id:C,action:"FS",payload:{method:"writeFile",args:[p,g]}})),x=(p,g)=>N(B({id:g,action:"FS",payload:{method:"readFile",args:[p,{encoding:"utf8"}]}})),k=(p,g)=>N(B({id:g,action:"FS",payload:{method:"unlink",args:[p]}})),$=(p,g,C)=>N(B({id:C,action:"FS",payload:{method:p,args:g}})),D=(p="eng",g)=>N(B({id:g,action:"loadLanguage",payload:{langs:p,options:c}})),J=(p="eng",g=tr,C,A)=>N(B({id:A,action:"initialize",payload:{langs:p,oem:g,config:C}})),K=(p={},g)=>N(B({id:g,action:"setParameters",payload:{params:p}})),W=async(p,g={},C={blocks:!0,text:!0,hocr:!0,tsv:!0},A)=>N(B({id:A,action:"recognize",payload:{image:await ke(p),options:g,output:C}})),G=(p="Tesseract OCR Result",g=!1,C)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),N(B({id:C,action:"getPDF",payload:{title:p,textonly:g}}))),V=async(p,g)=>N(B({id:g,action:"detect",payload:{image:await ke(p)}})),q=async()=>(m!==null&&(ar(m),m=null),Promise.resolve());nr(m,({workerId:p,jobId:g,status:C,action:A,data:T})=>{if(C==="resolve"){Ne(`[${p}]: Complete ${g}`);let h=T;A==="recognize"?h=Xt(T):A==="getPDF"&&(h=Array.from({...T,length:Object.keys(T).length})),f[A]({jobId:g,data:h})}else if(C==="reject")if(l[A](T),A==="load"&&v(T),i)i(T);else throw Error(T);else C==="progress"&&o({...T,userJobId:g})});const te={id:s,worker:m,setResolve:j,setReject:O,load:I,writeText:z,readText:x,removeFile:k,FS:$,loadLanguage:D,initialize:J,setParameters:K,recognize:W,getPDF:G,detect:V,terminate:q};return _().then(()=>y(te)).catch(()=>{}),w};const $e=Oe,ir=async(t,s,o)=>{const i=await $e(o);return await i.loadLanguage(s),await i.initialize(s),i.recognize(t).finally(async()=>{await i.terminate()})},cr=async(t,s)=>{const o=await $e(s);return await o.loadLanguage("osd"),await o.initialize("osd"),o.detect(t).finally(async()=>{await o.terminate()})};var lr={recognize:ir,detect:cr},dr={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},ur={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const hr=rt,mr=Oe,fr=lr,pr=dr,gr=Te,vr=ur,{setLogging:yr}=ee;var br={languages:pr,OEM:gr,PSM:vr,createScheduler:hr,createWorker:mr,setLogging:yr,...fr};const wr=Me(br);async function xr(t){try{const s=t.includes("data:image")?t.split(",")[1]:t;return(await wr.recognize(t,"eng",{logger:i=>console.log(i),langPath:"https://tessdata.projectnaptha.com/4.0.0",engineMode:"3",pageSegMode:"6"})).data.text}catch(s){return console.error("OCR Error:",s),""}}async function le(t){try{const s=document.createElement("canvas"),o=s.getContext("2d",{willReadFrequently:!0});if(!o)return t;const i=new Image;return i.src=t,new Promise(c=>{i.onload=()=>{s.width=i.width,s.height=i.height,o.drawImage(i,0,0);const f=o.getImageData(0,0,s.width,s.height),l=f.data;for(let y=0;y<l.length;y+=4){const w=.299*l[y]+.587*l[y+1]+.114*l[y+2],L=128,j=259*(L+255)/(255*(259-L))*(w-128)+128,O=w>160?255:0;l[y]=l[y+1]=l[y+2]=O}o.putImageData(f,0,0);const v=s.toDataURL("image/jpeg",.95);c(v)},i.onerror=()=>c(t)})}catch(s){return console.error("Image enhancement error:",s),t}}const pe="spendwise-merchant-frequencies";async function jr(t){const s=ge(),o=new Date().toISOString(),i=s.find(c=>c.name.toLowerCase()===t.toLowerCase());i?(i.frequency+=1,i.lastUsed=o):s.push({name:t,frequency:1,lastUsed:o}),localStorage.setItem(pe,JSON.stringify(s)),await kr(t)}function ge(){const t=localStorage.getItem(pe);return t?JSON.parse(t):[]}function Nr(t){const s=ge(),o=t.toLowerCase();return s.filter(c=>c.name.toLowerCase().includes(o)).sort((c,f)=>f.frequency-c.frequency)}async function kr(t){try{const s=t.toLowerCase().replace(/[^a-z0-9]/g,"").trim();if(!s)return null;const o=ge(),i=o.find(v=>v.name.toLowerCase()===t.toLowerCase());if(i&&i.logo)return i.logo;const l=`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='50' height='50'%3E%3Crect width='50' height='50' fill='hsl(${((s.charCodeAt(0)||97)-97)*15}, 70%25, 60%25)' /%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='24' fill='white'%3E${t.charAt(0).toUpperCase()}%3C/text%3E%3C/svg%3E`;return i&&(i.logo=l,localStorage.setItem(pe,JSON.stringify(o))),l}catch(s){return console.error("Error fetching merchant logo:",s),null}}const ve="spendwise-receipts";async function Ce(t){const s=await xr(t);console.log("Extracted text:",s);const o=Cr(s);o&&await jr(o);const i=Er(s),c=Rr(s),f=Lr(s),l=Ir(s),v={id:Re(),merchantName:o||"Unknown Merchant",total:i||0,date:c||new Date().toISOString().split("T")[0],currency:f||Ee(),items:l.length>0?l:[],imageUrl:t,processed:!0,created:new Date().toISOString()};return Ar(v),v}function Sr(t,s){return{id:Re(),amount:t.total,category:s,date:t.date,description:`Purchase at ${t.merchantName}`,receiptImage:t.imageUrl||null,currency:t.currency,items:t.items}}function Cr(t){const s=t.split(`
`).filter(c=>c.trim().length>0);if(s.length===0)return null;const o=[/MERCHANT:\s*([A-Za-z0-9\s&]+)/i,/STORE:\s*([A-Za-z0-9\s&]+)/i,/RESTAURANT:\s*([A-Za-z0-9\s&]+)/i];for(const c of o){const f=t.match(c);if(f&&f[1])return f[1].trim()}const i=Nr(s[0]);return i&&i.length>0?i[0].name:s[0].length>30?s[0].substring(0,30):s[0]}function Er(t){const s=[/TOTAL[:\s]*[$€£¥]?(\d+[.,]\d{2})/i,/AMOUNT[:\s]*[$€£¥]?(\d+[.,]\d{2})/i,/SUM[:\s]*[$€£¥]?(\d+[.,]\d{2})/i,/[$€£¥]?(\d+[.,]\d{2})\s*TOTAL/i,/[$€£¥](\d+[.,]\d{2})/];for(const i of s){const c=t.match(i);if(c&&c[1])return parseFloat(c[1].replace(",","."))}const o=t.match(/[$€£¥]?(\d+[.,]\d{2})/g);if(o&&o.length>0){const i=o.map(c=>parseFloat(c.replace(/[$€£¥]/g,"").replace(",",".")));return Math.max(...i)}return null}function Rr(t){const s=[/(\d{1,2})[\/\-\.](\d{1,2})[\/\-\.](\d{4})/,/(\d{1,2})[\/\-\.](\d{1,2})[\/\-\.](\d{4})/,/(\d{4})[\/\-\.](\d{1,2})[\/\-\.](\d{1,2})/,/(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*[\s\-\.\/,]+(\d{1,2})[\s\-\.\/,]+(\d{4})/i];for(const i of s){const c=t.match(i);if(c)try{if(c[0].includes("/")){const l=c[0].split("/");if(l.length===3){const v=l[2].length===4?l[2]:`20${l[2]}`,y=l[0].padStart(2,"0"),w=l[1].padStart(2,"0");return`${v}-${y}-${w}`}}return new Date().toISOString().split("T")[0]}catch(f){return console.error("Date parsing error:",f),new Date().toISOString().split("T")[0]}}return new Date().toISOString().split("T")[0]}function Lr(t){const s={$:"USD","€":"EUR","£":"GBP","¥":"JPY","₹":"INR","₽":"RUB",CA$:"CAD",A$:"AUD",HK$:"HKD",kr:"SEK",CHF:"CHF",R$:"BRL","₩":"KRW"};for(const[i,c]of Object.entries(s))if(t.includes(i))return c;const o=["USD","EUR","GBP","JPY","CAD","AUD","CHF","CNY"];for(const i of o)if(t.includes(i))return i;return Ee()}function Ir(t){const s=[],o=t.split(`
`),i=/(.+?)\s+(\d+(?:[.,]\d{2})?)$/,c=/(\d+)\s+x\s+(.+?)\s+(\d+(?:[.,]\d{2})?)$/;for(const f of o){const l=f.trim();if(l.length<5||/total|subtotal|tax|date|merchant|receipt/i.test(l))continue;const v=l.match(c);if(v){s.push({name:v[2].trim(),price:parseFloat(v[3].replace(",",".")),quantity:parseInt(v[1])});continue}const y=l.match(i);y&&s.push({name:y[1].trim(),price:parseFloat(y[2].replace(",","."))})}return s}function Ar(t){const s=ye();s.push(t),localStorage.setItem(ve,JSON.stringify(s))}function ye(){const t=localStorage.getItem(ve);return t?JSON.parse(t):[]}function Tr(t){const o=ye().filter(i=>i.id!==t);localStorage.setItem(ve,JSON.stringify(o))}function Pe(t){const s=["Date","Merchant","Amount","Currency","Items"],o=t.map(c=>[c.date,c.merchantName,c.total.toString(),c.currency,c.items.map(f=>`${f.name} (${f.price})`).join("; ")]);return[s,...o].map(c=>c.join(",")).join(`
`)}function Or(t){return Pe(t)}function $r({onCapture:t,onClose:s}){const o=S.useRef(null),i=S.useRef(null),[c,f]=S.useState(null),[l,v]=S.useState(null),[y,w]=S.useState(null),[L,m]=S.useState(!1),[j,O]=S.useState(!0);S.useEffect(()=>{async function x(){try{O(!0);const k={video:{facingMode:L?"user":"environment",width:{ideal:1920},height:{ideal:1080}}};c&&c.getTracks().forEach(D=>D.stop());const $=await navigator.mediaDevices.getUserMedia(k);o.current&&(o.current.srcObject=$),f($),v(!0),O(!1)}catch(k){console.error("Error accessing camera:",k),v(!1),O(!1),Z({title:"Camera Access Denied",description:"Please allow camera access in your browser settings.",variant:"destructive"})}}return x(),()=>{c&&c.getTracks().forEach(k=>k.stop())}},[L,c]);const N=()=>{if(o.current&&i.current&&c){U("success");const x=o.current,k=i.current;k.width=x.videoWidth,k.height=x.videoHeight;const $=k.getContext("2d");if($){$.drawImage(x,0,0,k.width,k.height);const D=k.toDataURL("image/jpeg",.9);w(D)}}},I=()=>{m(!L),U("info")},_=()=>{y&&(t(y),U("success"))},z=()=>{w(null),U("warning")};return l===!1?e.jsx(H.div,{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-background/95 backdrop-blur-sm p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs("div",{className:"bg-card border border-border rounded-lg shadow-xl p-6 max-w-md w-full text-center",children:[e.jsx(ue,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Camera Access Required"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Please allow camera access in your browser settings to use this feature."}),e.jsx(R,{onClick:s,children:"Close Camera"})]})}):e.jsxs(H.div,{className:"fixed inset-0 z-50 flex flex-col bg-black",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[j&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/90 z-10",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-primary border-t-transparent rounded-full animate-spin mb-3"}),e.jsx("span",{className:"text-white",children:"Starting camera..."})]})}),e.jsx("div",{className:"relative flex-1 overflow-hidden",children:y?e.jsx("img",{src:y,alt:"Captured receipt",className:"absolute h-full w-full object-contain bg-black"}):e.jsxs(e.Fragment,{children:[e.jsx("video",{ref:o,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute h-full w-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 border-[40px] sm:border-[80px] border-black/70 rounded-lg pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-white/30 rounded-lg"}),e.jsx("div",{className:"absolute top-0 left-0 w-10 h-10 border-t-2 border-l-2 border-white/70 rounded-tl"}),e.jsx("div",{className:"absolute top-0 right-0 w-10 h-10 border-t-2 border-r-2 border-white/70 rounded-tr"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-10 h-10 border-b-2 border-l-2 border-white/70 rounded-bl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-10 h-10 border-b-2 border-r-2 border-white/70 rounded-br"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("p",{className:"text-white/70 text-xs sm:text-sm bg-black/30 px-2 py-1 rounded",children:"Position receipt in frame"})})]})]})}),e.jsx("canvas",{ref:i,className:"hidden"}),e.jsx("div",{className:"bg-black p-4 flex items-center justify-between",children:y?e.jsxs(e.Fragment,{children:[e.jsx(R,{variant:"ghost",size:"icon",onClick:z,className:"text-white hover:bg-white/10",children:e.jsx(Ie,{className:"h-6 w-6"})}),e.jsxs(R,{onClick:_,className:"bg-primary hover:bg-primary/90 text-white px-6",children:[e.jsx(Le,{className:"h-5 w-5 mr-2"}),"Use Photo"]}),e.jsx("div",{className:"w-10"})," "]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{variant:"ghost",size:"icon",onClick:s,className:"text-white hover:bg-white/10",children:e.jsx(de,{className:"h-6 w-6"})}),e.jsx(R,{size:"icon",onClick:N,className:"h-16 w-16 rounded-full bg-white hover:bg-white/90 text-black",children:e.jsx(ue,{className:"h-8 w-8"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:I,className:"text-white hover:bg-white/10",children:e.jsx(Ye,{className:"h-6 w-6"})})]})})]})}function qr(){const t=Ue(),[s,o]=S.useState(!1),[i,c]=S.useState(0),[f,l]=S.useState(null),[v,y]=S.useState("groceries"),[w,L]=S.useState(null),[m,j]=S.useState(ye()),[O,N]=S.useState(!1),[I,_]=S.useState([]),[z,x]=S.useState(!1),k=S.useRef(null),$=S.useRef(null),D=We(),J=h=>{U("success"),x(!1),le(h).then(a=>{l(a)})},K=S.useCallback(()=>{x(!0)},[]),W=S.useCallback(()=>{k.current&&k.current.click()},[]),G=h=>{var r;const a=(r=h.target.files)==null?void 0:r[0];if(a){U("success");const n=new FileReader;n.onload=async u=>{var E;const d=(E=u.target)==null?void 0:E.result,b=await le(d);l(b)},n.readAsDataURL(a)}},V=S.useCallback(()=>{$.current&&$.current.click()},[]),q=h=>{const a=h.target.files;if(a&&a.length>0){U("success"),N(!0);const r=Array.from(a),n=[];r.forEach(u=>{const d=new Promise(b=>{const E=new FileReader;E.onload=async P=>{var X;const F=(X=P.target)==null?void 0:X.result,M=await le(F);b(M)},E.readAsDataURL(u)});n.push(d)}),Promise.all(n).then(u=>{_(u),Z({title:"Batch Upload Ready",description:`${u.length} receipts ready for processing.`})})}},te=async()=>{if(I.length===0)return;o(!0);let h=0;for(const a of I)try{c(Math.floor(h/I.length*100));const r=await Ce(a);j(n=>[...n,r]),h++}catch(r){console.error("Error processing batch image:",r)}c(100),U("success"),Z({title:"Batch Processing Complete",description:`Processed ${h} out of ${I.length} receipts.`}),setTimeout(()=>{o(!1),_([]),N(!1),be()},1e3)},p=async()=>{if(f){o(!0),c(0);try{const h=setInterval(()=>{c(r=>r>=95?(clearInterval(h),95):r+5)},100),a=await Ce(f);clearInterval(h),c(100),L(a),j(r=>[a,...r]),setTimeout(()=>{o(!1),U("success")},500)}catch(h){console.error("Error processing image:",h),Z({title:"Processing Failed",description:"Could not process the receipt image. Please try again.",variant:"destructive"}),o(!1)}}},g=()=>{l(null),L(null),U("info")},C=()=>{if(!w)return;const h=qe(v),a=Sr(w,h);ze(a),Z({title:"Expense Saved",description:`Added ${a.amount} ${w.currency} for ${v}.`}),be(),U("success"),setTimeout(()=>{t("/dashboard")},1500)},A=()=>{const h=Pe(m),a=new Blob([h],{type:"text/csv"}),r=URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download=`receipts-${we(new Date,"yyyy-MM-dd")}.csv`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r),Z({title:"Export Complete",description:"Receipts exported as CSV."}),U("success")},T=()=>{const h=Or(m),a=new Blob([h],{type:"text/csv"}),r=URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download=`receipts-${we(new Date,"yyyy-MM-dd")}.xlsx`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r),Z({title:"Export Complete",description:"Receipts exported as Excel."}),U("success")};return e.jsxs("div",{className:"container p-4 max-w-md mx-auto",children:[e.jsx(Fe,{title:"Receipt Scanner"}),e.jsxs(Ge,{defaultValue:"scan",className:"w-full",children:[e.jsxs(He,{className:"grid grid-cols-3 mb-4",children:[e.jsx(oe,{value:"scan",children:"Scan"}),e.jsx(oe,{value:"history",children:"History"}),e.jsx(oe,{value:"batch",children:"Batch"})]}),e.jsx(ie,{value:"scan",className:"space-y-4",children:f?e.jsx(e.Fragment,{children:e.jsxs(ae,{children:[e.jsxs(H.div,{className:"relative rounded-lg overflow-hidden border border-border",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[e.jsx("img",{src:f,alt:"Receipt",className:"w-full h-auto object-contain bg-black/5"}),e.jsx(H.div,{className:"absolute top-2 right-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:e.jsx(R,{size:"icon",variant:"destructive",className:"rounded-full h-8 w-8",onClick:g,children:e.jsx(de,{className:"h-4 w-4"})})}),s&&e.jsxs(H.div,{className:"absolute inset-0 flex flex-col items-center justify-center bg-background/80 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},children:[e.jsx("div",{className:"w-32 h-2 bg-muted rounded-full mb-4 overflow-hidden",children:e.jsx(H.div,{className:"h-full bg-primary",initial:{width:"0%"},animate:{width:`${i}%`}})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Scanning receipt..."})]})]}),w?e.jsxs(H.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsxs(ne,{className:"p-4 space-y-3",children:[e.jsx("h3",{className:"font-medium",children:"Scan Results"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"Merchant"}),e.jsx("span",{className:"font-medium truncate",children:w.merchantName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount"}),e.jsxs("span",{className:"font-medium",children:[w.total," ",w.currency]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"Date"}),e.jsx("span",{className:"font-medium",children:w.date})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"Items"}),e.jsx("span",{className:"font-medium",children:w.items.length})]})]}),w.items.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Items:"}),e.jsx("div",{className:"max-h-32 overflow-y-auto text-xs space-y-1",children:w.items.map((h,a)=>e.jsxs("div",{className:"flex justify-between p-1 odd:bg-muted/30 rounded",children:[e.jsx("span",{children:h.name}),e.jsx("span",{children:h.price})]},a))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Be,{htmlFor:"category",children:"Expense Category"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:D.map(h=>e.jsx(H.button,{className:`p-2 rounded-md text-xs flex flex-col items-center justify-center ${v===h?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground hover:bg-muted"}`,onClick:()=>{y(h),U("info")},whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx("span",{className:"capitalize",children:h})},h))})]}),e.jsxs(R,{className:"w-full",onClick:C,children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Save as Expense"]})]}):e.jsx(R,{className:"w-full",disabled:s,onClick:p,children:s?"Processing...":"Process Receipt"})]})}):e.jsx(ne,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(R,{className:"w-full py-8 bg-primary/10 hover:bg-primary/20 text-primary border border-dashed border-primary/30",variant:"outline",onClick:K,children:[e.jsx(ue,{className:"mr-2 h-5 w-5"}),"Take Photo"]}),e.jsxs(R,{className:"w-full py-8 bg-muted/50 hover:bg-muted text-muted-foreground border border-dashed border-muted-foreground/30",variant:"outline",onClick:W,children:[e.jsx(Ze,{className:"mr-2 h-5 w-5"}),"Upload Image"]}),e.jsx("input",{type:"file",accept:"image/*",ref:k,onChange:G,className:"hidden"})]})})}),e.jsxs(ie,{value:"history",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Receipt History"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{size:"sm",variant:"outline",className:"flex gap-1 items-center text-xs h-8",onClick:A,disabled:m.length===0,children:[e.jsx(Ke,{className:"h-3 w-3"}),"CSV"]}),e.jsxs(R,{size:"sm",variant:"outline",className:"flex gap-1 items-center text-xs h-8",onClick:T,disabled:m.length===0,children:[e.jsx(Je,{className:"h-3 w-3"}),"Excel"]})]})]}),m.length===0?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx("p",{children:"No receipt history yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Scan receipts to build your history"})]}):e.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-1",children:e.jsx(ae,{children:m.map((h,a)=>e.jsx(H.div,{className:"p-3 border border-border rounded-lg bg-card relative",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{delay:a*.05},layout:!0,..._e(a),children:e.jsxs("div",{className:"flex gap-3",children:[h.imageUrl&&e.jsx("div",{className:"w-14 h-14 rounded bg-muted flex-shrink-0 overflow-hidden",children:e.jsx("img",{src:h.imageUrl,alt:"Receipt",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:h.merchantName}),e.jsx("p",{className:"text-muted-foreground text-xs",children:h.date}),e.jsxs("p",{className:"font-medium text-sm mt-1",children:[h.total," ",h.currency]})]}),e.jsx(R,{size:"icon",variant:"ghost",className:"h-8 w-8 text-muted-foreground hover:text-destructive",onClick:()=>{Tr(h.id),j(r=>r.filter(n=>n.id!==h.id)),U("warning")},children:e.jsx(Ie,{className:"h-4 w-4"})})]})},h.id))})})]}),e.jsxs(ie,{value:"batch",className:"space-y-4",children:[e.jsx(ne,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h3",{className:"font-medium",children:"Batch Receipt Processing"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Upload multiple receipts and process them in one go."}),O?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[I.map((h,a)=>e.jsxs("div",{className:"w-16 h-16 rounded bg-muted relative overflow-hidden",children:[e.jsx("img",{src:h,alt:`Batch ${a}`,className:"w-full h-full object-cover"}),e.jsx(R,{size:"icon",variant:"destructive",className:"absolute top-0 right-0 h-6 w-6 rounded-full",onClick:()=>{_(r=>r.filter((n,u)=>u!==a)),U("warning")},children:e.jsx(de,{className:"h-3 w-3"})})]},a)),e.jsx(R,{className:"w-16 h-16 bg-muted hover:bg-muted/80 text-muted-foreground",variant:"ghost",onClick:V,children:e.jsx(De,{className:"h-5 w-5"})})]}),s?e.jsxs("div",{className:"w-full space-y-2",children:[e.jsx("div",{className:"w-full h-2 bg-muted rounded-full overflow-hidden",children:e.jsx(H.div,{className:"h-full bg-primary",initial:{width:"0%"},animate:{width:`${i}%`}})}),e.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:["Processing ",i,"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(R,{className:"w-full",onClick:te,disabled:I.length===0,children:["Process ",I.length," Receipt",I.length!==1?"s":""]}),e.jsx(R,{className:"w-full",variant:"outline",onClick:()=>{N(!1),_([])},children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(R,{className:"w-full py-8 bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/30 dark:to-amber-800/20 hover:bg-amber-100 dark:hover:bg-amber-900/40 text-amber-900 dark:text-amber-200 border border-dashed border-amber-200 dark:border-amber-800",variant:"outline",onClick:V,children:[e.jsx(Ve,{className:"mr-2 h-5 w-5"}),"Select Multiple Receipts"]}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,ref:$,onChange:q,className:"hidden"})]})]})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Batch processing allows you to process up to 10 receipts at once."})})]})]}),e.jsx(ae,{children:z&&e.jsx($r,{onCapture:J,onClose:()=>x(!1)})})]})}export{qr as default};
